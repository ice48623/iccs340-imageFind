<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  </head>
  <body>
    <script src="masonry.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.js"></script>
    <h1>Masonry - appended</h1>

    <div class="grid">
      <div class="grid-item grid-item--width3"></div>
      <div class="grid-item grid-item--height3"></div>
      <div class="grid-item"></div>
      <div class="grid-item grid-item--height2"></div>
    </div>

    <p><button class="append-button">Append new items</button></p>


  </body>

  <script>
    // external js: masonry.pkgd.js

    var $grid = $('.grid').masonry({
      columnWidth: 160,
      itemSelector: '.grid-item'
    });

    $('.append-button').on( 'click', function() {
      genImage();
      // var elems = [ getItemElement(), getItemElement(), getItemElement() ];
      // var $item = $('<img class="grid-item" src=http://eskipaper.com/images/landscape-sunset-15.jpg>');
      // var $elems = $( elems );
      // $grid.append( $item ).masonry( 'appended', $item );




    });

    // create <div class="grid-item"></div>
    function getItemElement() {
      var elem = document.createElement('div');
      var wRand = Math.random();
      var hRand = Math.random();
      var widthClass = wRand > 0.8 ? 'grid-item--width3' : wRand > 0.6 ? 'grid-item--width2' : '';
      var heightClass = hRand > 0.85 ? 'grid-item--height4' : hRand > 0.6 ? 'grid-item--height3' : hRand > 0.35 ? 'grid-item--height2' : '';
      elem.className = 'grid-item ' + widthClass + ' ' + heightClass;
      return elem;
    }

    function genImage(){
      var cus_key = "consumer_key=oHqaYKxBd5NTq4xZMG1cchZuluycWyr2BI4Ehng4"
      var url = "https://api.500px.com/v1/photos/search?term=" + "nature" + "&" + cus_key + "&image_size=1080"
      $.get(url,function(json){
        $.each(json.photos,function(i, item){
          var $item = $('<img class="grid-item" src='+ item.image_url + '>');
          $grid.append( $item ).masonry( 'appended', $item );
        })
      })


    }

  </script>

</html>
